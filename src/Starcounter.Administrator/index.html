<!doctype html>

<head>
    <title>Starcounter Administrator</title>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google" value="notranslate">

    <link rel="shortcut icon" href="/app/images/favicon.ico">

    <link rel="stylesheet" media="screen" href="/app/vendor/handsontable/angular-ui-handsontable.full.css">

    <!-- angular-ui,  Used by: CodeMirror -->
    <link rel="stylesheet" type="text/css" href="/app/vendor/angular-ui/angular-ui-0.3.0.css">

    <!-- CodeMirror -->
    <link rel="stylesheet" type="text/css" href="/app/vendor/codemirror/codemirror.css">
    <link rel="stylesheet" type="text/css" href="/app/vendor/codemirror/monokai.css">

    <!-- Bootstrap, Used by: Global -->
    <link rel="stylesheet" href="/app/vendor/bootstrap/bootstrap.min.css">
    <link rel="stylesheet" href="/app/vendor/bootstrap/bootstrap-responsive.min.css">


    <!--<link rel="stylesheet" href="/css/select2.css">-->
    <link rel="stylesheet" href="/app/vendor/select2/select2.css">

    <link rel="stylesheet" href="/app/css/master.css">

    <!-- jQuery, Used by: angular-ui, ui-bootstrap  -->
    <script src="/app/vendor/jquery/jquery-2.0.3.min.js"></script>

    <script src="/app/vendor/handsontable/very-native-scrollbar.js"></script>

    <script src="/app/vendor/select2/select2.js"></script>

    <!-- Angular, Used by: Global -->
    <script src="/app/vendor/angular/angular.min.js"></script>
    <script src="/app/vendor/angular/angular-route.min.js"></script>
    <script src="/app/vendor/angular/angular-resource.min.js"></script>

    <script src="/app/vendor/angular-ui/select2.js"></script>

    <!-- CodeMirror -->
    <script src="/app/vendor/codemirror/codemirror.js"></script>
    <script src="/app/vendor/codemirror/sql.js"></script>

    <!-- Angular UI, Used by: CodeMirror -->
    <script src="/app/vendor/angular-ui/angular-ui-0.4.0.min.js"></script>

    <!-- UI-Bootstrap, Used by: Modal window, toogle button -->
    <script src="/app/vendor/angular-ui/ui-bootstrap-tpls-0.3.0.min.js"></script>

    <!-- Handsontable, Used in: Log and Sql window -->
    <script src="/app/vendor/handsontable/angular-ui-handsontable.full.js"></script>

    <!-- Type conversion from Starcounter DbTypeCode to HandsonTable types. See https://gist.github.com/warpech/c33eabf2b72741eb927b -->

    <script src="/app/js/scTypesPlugin.js"></script>
    <script src="/app/js/scNullCellsPlugin.js"></script>


    <script src="/app/js/app.js"></script>

    <!-- Services -->
    <script src="/app/services/HostModelService.js"></script>
    <script src="/app/services/ConsoleService.js"></script>
    <script src="/app/services/DatabaseService.js"></script>
    <script src="/app/services/ExecutableService.js"></script>
    <script src="/app/services/SqlService.js"></script>
    <script src="/app/services/LogService.js"></script>
    <script src="/app/services/GatewayService.js"></script>
    <script src="/app/services/ServerService.js"></script>
    <script src="/app/services/VersionCheckService.js"></script>

    <!-- Factories -->
    <script src="/app/factories/Utils.js"></script>
    <script src="/app/factories/UserMessageFactory.js"></script>
    <script src="/app/factories/NoticeFactory.js"></script>
    <script src="/app/factories/JobFactory.js"></script>

    <!-- Controllers -->
    <script src="/app/controllers/UserErrorMessageCtrl.js"></script>
    <script src="/app/controllers/DatabasesCtrl.js"></script>
    <script src="/app/controllers/DatabaseCtrl.js"></script>
    <script src="/app/controllers/DatabaseCreateCtrl.js"></script>
    <script src="/app/controllers/DatabaseSettingsCtrl.js"></script>
    <script src="/app/controllers/ExecutableCtrl.js"></script>
    <script src="/app/controllers/ExecutablesCtrl.js"></script>
    <script src="/app/controllers/ExecutableStartCtrl.js"></script>
    <script src="/app/controllers/SqlCtrl.js"></script>
    <script src="/app/controllers/LogCtrl.js"></script>
    <script src="/app/controllers/GatewayCtrl.js"></script>
    <script src="/app/controllers/ServerSettingsCtrl.js"></script>

    <!-- Directives -->
    <script src="/app/directives/Notices.js"></script>
    <script src="/app/directives/Jobs.js"></script>
    <script src="/app/directives/VersionCheck.js"></script>

    <!-- Angular localisation -->
    <script type='text/javascript'>

        var l_lang;
        if (navigator.userLanguage) // Explorer
            l_lang = navigator.userLanguage;
        else if (navigator.language) // Chrome
            l_lang = navigator.language;
        else
            l_lang = "en";

        document.write('<scr' + 'ipt type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/angular-i18n/1.0.7/angular-locale_' + l_lang.toLowerCase() + '.js"></sc' + 'ript>');
    </script>

</head>

<body data-ng-app="scadmin" class="container">

    <div id="top" class="navbar ">
        <div class="navbar-inner">
            <div class="container">

                <a class="brand" href="#/main">
                    <img src="/app/images/sc_logo_24x24.png" style="margin: -3px 0px 0px 0px">
                    Starcounter Administrator</a>
                <ul class="nav pull-right">
                    <li><a href="https://github.com/starcounter/starcounter/wiki" target="_blank">Help</a></li>
                </ul>
            </div>
        </div>

    </div>

    <div class="toplinks">
        <ul class="nav nav-pills" data-ng-controller="NavbarController">

            <li data-ng-class="{active: getClass('/databases/.*/executables/.*|/executables')}" class="dropdown">
                <a id="A1" href="#" role="button" class="dropdown-toggle" data-toggle="dropdown">Executables <b class="caret"></b></a>
                <ul class="dropdown-menu" role="menu" aria-labelledby="drop1">

                    <li role="presentation">
                        <a role="menuitem" tabindex="-1" href="#/executables">View all</a>
                    </li>

                    <li role="presentation" class="divider"></li>


                    <li ng-repeat="executable in model.executables" role="presentation">
                        <a role="menuitem" tabindex="-1" href="#/databases/{{executable.databaseName}}/executables/{{executable.Name}}">{{executable.Name}}</a>
                    </li>

                    <li ng-hide="model.executables.length == 0" role="presentation" class="divider"></li>

                    <li role="presentation">
                        <a role="menuitem" tabindex="-1" href="#/executableStart">Start...</a>
                    </li>
                </ul>
            </li>


            <li data-ng-class="{active: getClass('/databases[^/]*$|/databases/[^/]*$')}" class="dropdown">
                <a id="drop1" href="#" role="button" class="dropdown-toggle" data-toggle="dropdown">Databases <b class="caret"></b></a>
                <ul class="dropdown-menu" role="menu" aria-labelledby="drop1">

                    <li role="presentation">
                        <a role="menuitem" tabindex="-1" href="#/databases">View all</a>
                    </li>

                    <li role="presentation" class="divider"></li>


                    <li ng-repeat="database in model.databases" role="presentation">
                        <a role="menuitem" tabindex="-1" href="#/databases/{{database.name}}">{{database.name}}<span ng-show="database.running" class="pull-right label label-success">Running</span></a>
                    </li>

                    <li ng-hide="model.databases.length == 0" role="presentation" class="divider"></li>

                    <li role="presentation">
                        <a role="menuitem" tabindex="-1" href="#/databaseCreate">Create...</a>
                    </li>
                </ul>
            </li>

            <li data-ng-class="{active: getClass('/sql')}"><a href="#/sql">SQL</a></li>
            <li data-ng-class="{active: getClass('/log')}"><a href="#/log">Log</a></li>
            <li data-ng-class="{active: getClass('/gateway') }"><a href="#/gateway">Network</a></li>
            <li data-ng-class="{active: getClass('/serverSettings') }"><a href="#/serverSettings">Settings</a></li>

<!--            <li data-ng-class="{active: getClass('/executables')}"><a href="#/executables">Executables</a></li>
            <li data-ng-class="{active: getClass('/databases')}"><a href="#/databases">Databases</a></li>-->


        </ul>
    </div>


    <version-check></version-check>

    <!--    <div class="alert alert-info" data-ng-show="newVersion!=null">
        <button type="button" class="close" data-ng-click="closeVersionNotice()" data-dismiss="alert">&times;</button>
        <strong>New Version!</strong>
        <p>A newer version of Starcounter is available.</p>
        <a href="{{newVersion.downloadUri}}" target="_blank">Download ({{newVersion.version}})</a>
    </div>-->

    <div class="progress progress-striped active" data-ng-repeat="job in jobs">
        <div class="bar" style="width: 100%;">{{job.message}}</div>
    </div>

    <jobs></jobs>

    <notices></notices>


    <div data-ng-view />


</body>
